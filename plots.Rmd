---
title: "Plots"
---

### NYC Restaurant Inspection Data

```{r}
devtools::install_github("p8105/p8105.datasets")
library(p8105.datasets)
library(tidyverse)
library(plotly)
data("rest_inspec")

scores_2017 = 
  rest_inspec %>% 
  separate(inspection_date, c("inspection_year", "inspection_month", "inspection_day"), sep = "-") %>% 
  filter(boro == "MANHATTAN" & inspection_year >= 2013 & score != "NA" & boro != "NA" & boro != "Missing") %>%
  distinct(camis, score, inspection_year)
  
  
scores_2017 %>% plot_ly(y = ~score, color = ~inspection_year, type = "box", colors = "Set2")

grades_2013_2017 = 
  rest_inspec %>% 
  separate(grade_date, c("grade_year", "grade_month", "grade_day"), sep = "-") %>% 
  filter(grade_year >= 2013 & boro != "NA" & boro != "Missing" & grade != "NA" & grade != "Not Yet Graded") %>% 
  group_by(grade_year, grade) %>% 
  summarize(number_grade = n()) %>% 
  group_by(grade_year) %>% 
  mutate(total_per_year = sum(number_grade),
         proportion_grade = number_grade / total_per_year
         ) 

grades_2013_2017 %>% plot_ly(y = ~proportion_grade, x = ~grade, color = ~grade_year, type = "scatter", mode = "lines")
  



##rest_inspec %>% 
  ##filter(boro == "MANHATTAN" & year == 2017 & score != "NA") %>% 
  ##ggplot(aes(x = zipcode, y = score))
```

```{r}
 ## mutate(grade = forcats::fct_relevel(as.factor(grade), c("A", "B", "C", "Z", "P")),
   ##      cuisine_description = as.factor(cuisine_description)) %>%
```

